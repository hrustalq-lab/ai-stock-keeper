# Phase 5: Picking Optimization

**Ğ¦ĞµĞ»ÑŒ:** ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑĞ±Ğ¾Ñ€ĞºĞ¸ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² â€” Ğ±Ñ‹ÑÑ‚Ñ€ĞµĞµ, Ğ¼ĞµĞ½ÑŒÑˆĞµ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº  
**Ğ¡Ñ€Ğ¾Ğº:** 3 Ğ½ĞµĞ´ĞµĞ»Ğ¸ (Week 11-13)  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** ğŸ“‹ ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ  
**Ğ”Ğ°Ñ‚Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ:** 2026-01-31

---

## 1. ĞĞ±Ğ·Ğ¾Ñ€

### 1.1 Deliverable

Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° ÑƒĞ¼Ğ½Ğ¾Ğ¹ ÑĞ±Ğ¾Ñ€ĞºĞ¸ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² (picking) Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ² Ğ¿Ğ¾ ÑĞºĞ»Ğ°Ğ´Ñƒ, Ñ‡ĞµĞº-Ğ»Ğ¸ÑÑ‚Ğ°Ğ¼Ğ¸ Ğ¸ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹ Ñ Ğ¾Ñ‚Ğ³Ñ€ÑƒĞ·Ğ¾Ñ‡Ğ½Ñ‹Ğ¼Ğ¸ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸ 1C.

### 1.2 User Story

```
ĞšĞ°Ğº Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ ÑĞºĞ»Ğ°Ğ´Ğ°,
Ñ Ñ…Ğ¾Ñ‡Ñƒ ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ ÑĞ¿Ğ¸ÑĞºĞ¸ ÑĞ±Ğ¾Ñ€ĞºĞ¸ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ½Ğ¸ĞºĞ¾Ğ²,
Ñ Ñ€Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ‹Ğ¼ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ¼ Ğ¿Ğ¾ ÑĞºĞ»Ğ°Ğ´Ñƒ Ğ¸ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸ĞµĞ¼ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸,
Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ÑĞ¾ĞºÑ€Ğ°Ñ‚Ğ¸Ñ‚ÑŒ Ğ²Ñ€ĞµĞ¼Ñ ÑĞ±Ğ¾Ñ€ĞºĞ¸ Ğ½Ğ° 40% Ğ¸ ÑƒĞ¼ĞµĞ½ÑŒÑˆĞ¸Ñ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸.

ĞšĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ½Ğ¸Ğº ÑĞºĞ»Ğ°Ğ´Ğ°,
Ñ Ñ…Ğ¾Ñ‡Ñƒ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ° ÑĞ±Ğ¾Ñ€ĞºÑƒ ÑĞ¾ ÑĞ¿Ğ¸ÑĞºĞ¾Ğ¼ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²,
Ğ¸Ñ… Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸ÑĞ¼Ğ¸ Ğ¸ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ¼ Ğ¾Ğ±Ñ…Ğ¾Ğ´Ğ°,
Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾ ÑĞ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ· Ğ±ĞµĞ· Ğ»Ğ¸ÑˆĞ½Ğ¸Ñ… Ğ¿ĞµÑ€ĞµĞ¼ĞµÑ‰ĞµĞ½Ğ¸Ğ¹.
```

### 1.3 ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Picking Optimization Flow                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ğŸ“¦ Orders from 1C                                                          â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                    â”‚
â”‚  â”‚ PickingListService  â”‚                                                    â”‚
â”‚  â”‚ (ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ»Ğ¸ÑÑ‚Ğ¾Ğ²)   â”‚                                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                    â”‚
â”‚             â”‚                                                               â”‚
â”‚             â–¼                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ RouteOptimizationService                                            â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â”‚ MVP:      Greedy Nearest-Neighbor (O(nÂ²))                      â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ Advanced: Google OR-Tools / Branch-and-Bound (O(2â¿) optimal)   â”‚ â”‚   â”‚
â”‚  â”‚ â”‚ Future:   Warehouse-specific ML model                          â”‚ â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚                                     â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â–¼                            â–¼                        â–¼            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Picking UI      â”‚     â”‚ Mobile Checklist    â”‚    â”‚ 1C Integration   â”‚  â”‚
â”‚  â”‚ (Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ñ)       â”‚     â”‚ (confirm + scan)    â”‚    â”‚ (Shipment docs)  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                         â”‚                        â”‚             â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                     â–¼                                      â”‚
â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚                           â”‚ Performance     â”‚                              â”‚
â”‚                           â”‚ Analytics       â”‚                              â”‚
â”‚                           â”‚ (pick time)     â”‚                              â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.4 ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | Ğ¦ĞµĞ»ÑŒ |
|---------|----------|------|
| **Pick Time** | Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ ÑĞ±Ğ¾Ñ€ĞºĞ¸ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ·Ğ°ĞºĞ°Ğ·Ğ° | -40% vs baseline |
| **Pick Accuracy** | % Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² Ğ±ĞµĞ· Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº | >99% |
| **Distance Saved** | Ğ¡Ğ¾ĞºÑ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¿ÑƒÑ‚Ğ¸ Ğ¿Ğ¾ ÑĞºĞ»Ğ°Ğ´Ñƒ | -30% |
| **Picks per Hour** | ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ½Ğ¸ĞºĞ° | +50% |
| **Error Rate** | ĞÑˆĞ¸Ğ±ĞºĞ¸ ÑĞ±Ğ¾Ñ€ĞºĞ¸ (wrong item/qty) | <1% |

---

## 2. Tech Stack

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ‘Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ° | Ğ’ĞµÑ€ÑĞ¸Ñ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|-----------|------------|--------|----------|
| **Route Optimization MVP** | Custom Nearest-Neighbor | - | Ğ–Ğ°Ğ´Ğ½Ñ‹Ğ¹ Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ (JavaScript) |
| **Route Optimization v2** | `@google-or/solve` | ^9.x | Google OR-Tools (WASM) |
| **Barcode Scanning** | `quagga2` | ^1.x | Ğ£Ğ¶Ğµ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½ (Phase 2) |
| **UI Components** | `@tanstack/react-table` | ^8.x | Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° picking list |
| **Drag-n-Drop** | `@dnd-kit/core` | ^6.x | Ğ ÑƒÑ‡Ğ½Ğ°Ñ ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ° |
| **Mobile UX** | PWA + Service Worker | - | Offline capability |
| **Maps (optional)** | Custom SVG / Canvas | - | Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑĞºĞ»Ğ°Ğ´Ğ° |

### 2.1 ĞŸĞ¾ÑÑ‚Ğ°Ğ¿Ğ½Ğ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

1. **MVP (Week 1):** Nearest-Neighbor + Basic UI
   - ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
   - Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ñ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸ÑĞ¼Ğ¸
   - Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ

2. **v2 (Week 2):** OR-Tools + Enhanced UX
   - ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹
   - Batch picking (Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²)
   - Wave picking (Ğ¿Ğ¾ Ğ·Ğ¾Ğ½Ğ°Ğ¼)

3. **v3 (Week 3):** 1C Integration + Analytics
   - ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¾Ñ‚Ğ³Ñ€ÑƒĞ·Ğ¾Ñ‡Ğ½Ñ‹Ñ… Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
   - Ğ”Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
   - AI verification (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)

---

## 3. ĞœĞ¾Ğ´ĞµĞ»ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### 3.1 Prisma Schema Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ

```prisma
// ============================================
// Phase 5: Ğ›Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¸ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ğ½Ğ° ÑĞºĞ»Ğ°Ğ´Ğµ
// ============================================
model WarehouseLocation {
  id          Int      @id @default(autoincrement())
  warehouse   String   @db.VarChar(50)
  locationCode String  @map("location_code") @db.VarChar(20) // "A-01-02" (Ğ·Ğ¾Ğ½Ğ°-Ñ€ÑĞ´-Ğ¿Ğ¾Ğ»ĞºĞ°)
  zone        String   @db.VarChar(10)     // "A", "B", "C" - Ğ·Ğ¾Ğ½Ñ‹ ÑĞºĞ»Ğ°Ğ´Ğ°
  aisle       Int      // Ğ ÑĞ´
  shelf       Int      // ĞŸĞ¾Ğ»ĞºĞ°
  position    Int      @default(1)         // ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ñ Ğ½Ğ° Ğ¿Ğ¾Ğ»ĞºĞµ
  
  // ĞšĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ñ‹ Ğ´Ğ»Ñ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ° Ñ€Ğ°ÑÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
  coordX      Float?   @map("coord_x")
  coordY      Float?   @map("coord_y")
  
  // ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
  maxCapacity Int?     @map("max_capacity")
  locationType String  @default("shelf") @map("location_type") @db.VarChar(20) // "shelf", "pallet", "bin", "floor"
  isActive    Boolean  @default(true) @map("is_active")
  
  // SKU Ğ½Ğ° ÑÑ‚Ğ¾Ğ¹ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¸ (one-to-many Ñ‡ĞµÑ€ĞµĞ· InventoryLocation)
  inventoryLocations InventoryLocation[]
  
  @@unique([warehouse, locationCode])
  @@index([warehouse])
  @@index([zone])
  @@map("warehouse_locations")
}

// ============================================
// Phase 5: Ğ¡Ğ²ÑĞ·ÑŒ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ñ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸ÑĞ¼Ğ¸
// ============================================
model InventoryLocation {
  id         Int      @id @default(autoincrement())
  sku        String   @db.VarChar(50)
  locationId Int      @map("location_id")
  quantity   Int      @default(0)
  isPrimary  Boolean  @default(true) @map("is_primary") // ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ñ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°
  
  location   WarehouseLocation @relation(fields: [locationId], references: [id])
  
  @@unique([sku, locationId])
  @@index([sku])
  @@index([locationId])
  @@map("inventory_locations")
}

// ============================================
// Phase 5: Ğ›Ğ¸ÑÑ‚ ÑĞ±Ğ¾Ñ€ĞºĞ¸ (Picking List)
// ============================================
model PickingList {
  id              Int       @id @default(autoincrement())
  listNumber      String    @unique @map("list_number") @db.VarChar(30) // "PL-2026-01-31-001"
  warehouse       String    @db.VarChar(50)
  
  // Ğ¢Ğ¸Ğ¿ ÑĞ±Ğ¾Ñ€ĞºĞ¸
  pickingType     String    @map("picking_type") @db.VarChar(20) // "single", "batch", "wave"
  
  // Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ
  status          String    @default("created") @db.VarChar(20) // "created", "assigned", "in_progress", "completed", "cancelled"
  priority        Int       @default(0) // 0-Ğ½Ğ¸Ğ·ĞºĞ¸Ğ¹, 1-Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹, 2-Ğ²Ñ‹ÑĞ¾ĞºĞ¸Ğ¹, 3-ÑÑ€Ğ¾Ñ‡Ğ½Ñ‹Ğ¹
  
  // ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ
  assignedTo      String?   @map("assigned_to") @db.VarChar(100) // Worker ID/name
  assignedAt      DateTime? @map("assigned_at")
  
  // Ğ’Ñ€ĞµĞ¼Ñ
  startedAt       DateTime? @map("started_at")
  completedAt     DateTime? @map("completed_at")
  estimatedMins   Int?      @map("estimated_mins") // ĞÑ†ĞµĞ½ĞºĞ° Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ ÑĞ±Ğ¾Ñ€ĞºĞ¸
  actualMins      Int?      @map("actual_mins")    // Ğ¤Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ
  
  // ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚
  optimizedRoute  Json?     @map("optimized_route") // ĞŸĞ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¹
  totalDistance   Float?    @map("total_distance")  // Ğ Ğ°ÑÑ‡Ñ‘Ñ‚Ğ½Ğ¾Ğµ Ñ€Ğ°ÑÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ (Ğ¼ĞµÑ‚Ñ€Ñ‹)
  
  // Ğ¡Ğ²ÑĞ·Ğ¸
  items           PickingItem[]
  orders          PickingOrder[]
  
  // ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
  notes           String?   @db.Text
  createdAt       DateTime  @default(now()) @map("created_at")
  updatedAt       DateTime  @updatedAt @map("updated_at")
  
  @@index([warehouse])
  @@index([status])
  @@index([assignedTo])
  @@index([createdAt])
  @@map("picking_lists")
}

// ============================================
// Phase 5: ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ Ğ² Ğ»Ğ¸ÑÑ‚Ğµ ÑĞ±Ğ¾Ñ€ĞºĞ¸
// ============================================
model PickingItem {
  id            Int       @id @default(autoincrement())
  pickingListId Int       @map("picking_list_id")
  
  // Ğ¢Ğ¾Ğ²Ğ°Ñ€
  sku           String    @db.VarChar(50)
  productName   String    @map("product_name") @db.VarChar(255)
  
  // ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾
  requiredQty   Int       @map("required_qty")  // Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ ÑĞ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ
  pickedQty     Int       @default(0) @map("picked_qty") // Ğ¤Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑĞ¾Ğ±Ñ€Ğ°Ğ½Ğ¾
  
  // Ğ›Ğ¾ĞºĞ°Ñ†Ğ¸Ñ
  locationCode  String    @map("location_code") @db.VarChar(20)
  zone          String    @db.VarChar(10)
  
  // ĞŸĞ¾Ñ€ÑĞ´Ğ¾Ğº Ğ¾Ğ±Ñ…Ğ¾Ğ´Ğ°
  sequenceNum   Int       @map("sequence_num") // ĞŸĞ¾Ñ€ÑĞ´ĞºĞ¾Ğ²Ñ‹Ğ¹ Ğ½Ğ¾Ğ¼ĞµÑ€ Ğ² Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğµ
  
  // Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ
  status        String    @default("pending") @db.VarChar(20) // "pending", "picked", "skipped", "shortage"
  
  // ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ
  confirmedAt   DateTime? @map("confirmed_at")
  confirmedBy   String?   @map("confirmed_by") @db.VarChar(100)
  barcodeScan   String?   @map("barcode_scan") @db.VarChar(100) // ĞÑ‚ÑĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ ÑˆÑ‚Ñ€Ğ¸Ñ…ĞºĞ¾Ğ´
  
  // ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹
  issueType     String?   @map("issue_type") @db.VarChar(30) // "not_found", "wrong_location", "damaged", "shortage"
  issueNote     String?   @map("issue_note") @db.Text
  
  // Ğ¡Ğ²ÑĞ·Ğ¸
  pickingList   PickingList @relation(fields: [pickingListId], references: [id])
  
  @@index([pickingListId])
  @@index([sku])
  @@index([status])
  @@map("picking_items")
}

// ============================================
// Phase 5: Ğ—Ğ°ĞºĞ°Ğ·Ñ‹ Ğ² Ğ»Ğ¸ÑÑ‚Ğµ ÑĞ±Ğ¾Ñ€ĞºĞ¸ (Ğ´Ğ»Ñ batch picking)
// ============================================
model PickingOrder {
  id            Int       @id @default(autoincrement())
  pickingListId Int       @map("picking_list_id")
  
  // Ğ—Ğ°ĞºĞ°Ğ· Ğ¸Ğ· 1C
  orderNumber   String    @map("order_number") @db.VarChar(50)
  customerName  String?   @map("customer_name") @db.VarChar(255)
  
  // Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ² ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğµ ÑĞ±Ğ¾Ñ€ĞºĞ¸
  status        String    @default("pending") @db.VarChar(20) // "pending", "in_progress", "completed"
  
  // Ğ¡Ğ²ÑĞ·ÑŒ Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ¼ 1C (Ğ¿Ğ¾ÑĞ»Ğµ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ñ)
  shipmentDocId String?   @map("shipment_doc_id") @db.VarChar(100)
  
  // Ğ¡Ğ²ÑĞ·Ğ¸
  pickingList   PickingList @relation(fields: [pickingListId], references: [id])
  
  @@index([pickingListId])
  @@index([orderNumber])
  @@map("picking_orders")
}

// ============================================
// Phase 5: Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ÑĞ±Ğ¾Ñ€Ğ¾Ğº (Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°)
// ============================================
model PickingHistory {
  id            Int       @id @default(autoincrement())
  pickingListId Int       @map("picking_list_id")
  workerId      String    @map("worker_id") @db.VarChar(100)
  warehouse     String    @db.VarChar(50)
  
  // ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸
  itemCount     Int       @map("item_count")
  totalQty      Int       @map("total_qty")
  pickingMins   Int       @map("picking_mins")
  errorCount    Int       @default(0) @map("error_count")
  shortageCount Int       @default(0) @map("shortage_count")
  
  // Ğ Ğ°ÑÑ‡Ñ‘Ñ‚Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸
  picksPerHour  Float     @map("picks_per_hour")
  accuracy      Float     // 0.0 - 1.0
  
  // Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ñ Ğ¾Ñ†ĞµĞ½ĞºĞ¾Ğ¹
  estimatedMins Int       @map("estimated_mins")
  efficiency    Float     // actual vs estimated (< 1.0 = Ğ±Ñ‹ÑÑ‚Ñ€ĞµĞµ Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ğ¾Ğ³Ğ¾)
  
  createdAt     DateTime  @default(now()) @map("created_at")
  
  @@index([workerId])
  @@index([warehouse])
  @@index([createdAt])
  @@map("picking_history")
}
```

---

## 4. Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸

### 4.1 Ğ‘Ğ»Ğ¾Ğº 1: Warehouse Location Model (Day 1-2)

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | Ğ¤Ğ°Ğ¹Ğ» | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|----|--------|------|--------|
| 1.1 | Prisma: WarehouseLocation model | `prisma/schema.prisma` | â¬œ |
| 1.2 | Prisma: InventoryLocation model | `prisma/schema.prisma` | â¬œ |
| 1.3 | LocationService | `src/server/services/location-service.ts` | â¬œ |
| 1.4 | tRPC: location router | `src/server/api/routers/location.ts` | â¬œ |
| 1.5 | Location import (CSV/JSON) | `scripts/import-locations.ts` | â¬œ |
| 1.6 | Unit-Ñ‚ĞµÑÑ‚Ñ‹ LocationService | `src/__tests__/unit/location.test.ts` | â¬œ |

**LocationService API:**

```typescript
// src/server/services/location-service.ts

export interface LocationInput {
  warehouse: string;
  locationCode: string;  // "A-01-02"
  zone: string;          // "A"
  aisle: number;         // 1
  shelf: number;         // 2
  position?: number;     // 1
  coordX?: number;
  coordY?: number;
  maxCapacity?: number;
  locationType?: "shelf" | "pallet" | "bin" | "floor";
}

export class LocationService {
  /**
   * Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ñ
   */
  async createLocation(input: LocationInput): Promise<WarehouseLocation>;

  /**
   * ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¸ ÑĞºĞ»Ğ°Ğ´Ğ°
   */
  async getLocations(warehouse: string): Promise<WarehouseLocation[]>;

  /**
   * ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°
   */
  async getLocationsForSku(sku: string, warehouse: string): Promise<InventoryLocation[]>;

  /**
   * ĞĞ°Ğ·Ğ½Ğ°Ñ‡Ğ¸Ñ‚ÑŒ Ñ‚Ğ¾Ğ²Ğ°Ñ€ Ğ½Ğ° Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ñ
   */
  async assignSkuToLocation(
    sku: string,
    locationId: number,
    quantity: number,
    isPrimary?: boolean
  ): Promise<InventoryLocation>;

  /**
   * Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ñ€Ğ°ÑÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ´Ğ²ÑƒĞ¼Ñ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸ÑĞ¼Ğ¸
   */
  calculateDistance(from: WarehouseLocation, to: WarehouseLocation): number;

  /**
   * Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¹ Ğ¸Ğ· CSV
   */
  async importFromCSV(warehouse: string, csvPath: string): Promise<number>;
}
```

**Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¸:**

```
ĞšĞ¾Ğ´ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¸: "A-01-02"
             â”‚  â”‚   â”‚
             â”‚  â”‚   â””â”€â”€ ĞŸĞ¾Ğ»ĞºĞ° (shelf)
             â”‚  â””â”€â”€â”€â”€â”€â”€ Ğ ÑĞ´ (aisle)
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€ Ğ—Ğ¾Ğ½Ğ° (zone)

ĞšĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ñ‹ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾):
- coordX: Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ³Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğ°Ğ»Ğ¸ (Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ¾Ñ‚ Ğ²Ñ…Ğ¾Ğ´Ğ°)
- coordY: Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ²ĞµÑ€Ñ‚Ğ¸ĞºĞ°Ğ»Ğ¸ (Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ¾Ñ‚ Ğ²Ñ…Ğ¾Ğ´Ğ°)
```

---

### 4.2 Ğ‘Ğ»Ğ¾Ğº 2: Route Optimization (Day 3-5)

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | Ğ¤Ğ°Ğ¹Ğ» | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|----|--------|------|--------|
| 2.1 | RouteOptimizationService | `src/server/services/route-optimization.ts` | â¬œ |
| 2.2 | Nearest-Neighbor algorithm | `src/server/services/route-optimization.ts` | â¬œ |
| 2.3 | Zone-based optimization | `src/server/services/route-optimization.ts` | â¬œ |
| 2.4 | OR-Tools integration (v2) | `src/server/services/route-optimization.ts` | â¬œ |
| 2.5 | Distance matrix calculation | `src/server/services/route-optimization.ts` | â¬œ |
| 2.6 | Unit-Ñ‚ĞµÑÑ‚Ñ‹ RouteOptimization | `src/__tests__/unit/route-optimization.test.ts` | â¬œ |

**RouteOptimizationService API:**

```typescript
// src/server/services/route-optimization.ts

export interface Location {
  code: string;
  zone: string;
  aisle: number;
  shelf: number;
  coordX?: number;
  coordY?: number;
}

export interface PickItem {
  sku: string;
  productName: string;
  quantity: number;
  location: Location;
}

export interface OptimizedRoute {
  items: PickItem[];        // ĞÑ‚ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ñƒ
  totalDistance: number;    // ĞĞ±Ñ‰ĞµĞµ Ñ€Ğ°ÑÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ (Ğ¼ĞµÑ‚Ñ€Ñ‹)
  estimatedMins: number;    // ĞÑ†ĞµĞ½ĞºĞ° Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ (Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñ‹)
  algorithm: string;        // "nearest_neighbor" | "or_tools" | "zone_based"
}

export interface OptimizationConfig {
  algorithm: "nearest_neighbor" | "or_tools" | "zone_based";
  startLocation?: Location;  // ĞĞ°Ñ‡Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ñ‚Ğ¾Ñ‡ĞºĞ° (Ğ²Ñ…Ğ¾Ğ´ Ğ½Ğ° ÑĞºĞ»Ğ°Ğ´)
  endLocation?: Location;    // ĞšĞ¾Ğ½ĞµÑ‡Ğ½Ğ°Ñ Ñ‚Ğ¾Ñ‡ĞºĞ° (Ğ·Ğ¾Ğ½Ğ° ÑƒĞ¿Ğ°ĞºĞ¾Ğ²ĞºĞ¸)
  walkingSpeedMps?: number;  // Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ Ñ…Ğ¾Ğ´ÑŒĞ±Ñ‹ Ğ¼/ÑĞµĞº (default: 1.4)
  pickTimeSeconds?: number;  // Ğ’Ñ€ĞµĞ¼Ñ Ğ½Ğ° Ğ¾Ğ´Ğ¸Ğ½ pick (default: 15)
}

export class RouteOptimizationService {
  /**
   * ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚ ÑĞ±Ğ¾Ñ€ĞºĞ¸
   */
  optimize(items: PickItem[], config?: OptimizationConfig): OptimizedRoute;

  /**
   * Nearest-Neighbor Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ (MVP)
   * Ğ–Ğ°Ğ´Ğ½Ñ‹Ğ¹: Ğ²ÑĞµĞ³Ğ´Ğ° Ğ¸Ğ´Ñ‘Ğ¼ Ğº Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞµĞ¹ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¹ Ñ‚Ğ¾Ñ‡ĞºĞµ
   * O(nÂ²) ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ, ~90% Ğ¾Ñ‚ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼ÑƒĞ¼Ğ°
   */
  nearestNeighbor(items: PickItem[], start?: Location): PickItem[];

  /**
   * Zone-based Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
   * Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼ Ğ¿Ğ¾ Ğ·Ğ¾Ğ½Ğ°Ğ¼, Ğ·Ğ°Ñ‚ĞµĞ¼ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ·Ğ¾Ğ½Ñ‹ Ğ¿Ğ¾ nearest-neighbor
   */
  zoneBased(items: PickItem[], start?: Location): PickItem[];

  /**
   * Google OR-Tools (Advanced)
   * ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ TSP
   */
  orToolsOptimize(items: PickItem[]): Promise<PickItem[]>;

  /**
   * Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¼Ğ°Ñ‚Ñ€Ğ¸Ñ†Ñƒ Ñ€Ğ°ÑÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¹
   */
  buildDistanceMatrix(locations: Location[]): number[][];

  /**
   * Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ñ€Ğ°ÑÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¼ĞµĞ¶Ğ´Ñƒ Ñ‚Ğ¾Ñ‡ĞºĞ°Ğ¼Ğ¸
   * Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ Manhattan distance ĞµÑĞ»Ğ¸ Ğ½ĞµÑ‚ ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚
   */
  calculateDistance(from: Location, to: Location): number;

  /**
   * ĞÑ†ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ²Ñ€ĞµĞ¼Ñ ÑĞ±Ğ¾Ñ€ĞºĞ¸
   */
  estimatePickingTime(route: OptimizedRoute, config?: OptimizationConfig): number;
}
```

**ĞĞ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ñ‹ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸:**

```typescript
// Nearest-Neighbor (MVP)
function nearestNeighbor(items: PickItem[], start?: Location): PickItem[] {
  const result: PickItem[] = [];
  const remaining = [...items];
  let current = start ?? remaining[0]?.location;

  while (remaining.length > 0) {
    // ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞ¸Ğ¹ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚
    let nearestIdx = 0;
    let nearestDist = Infinity;

    for (let i = 0; i < remaining.length; i++) {
      const dist = calculateDistance(current!, remaining[i]!.location);
      if (dist < nearestDist) {
        nearestDist = dist;
        nearestIdx = i;
      }
    }

    // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¸ ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¸Ğ· remaining
    const nearest = remaining.splice(nearestIdx, 1)[0]!;
    result.push(nearest);
    current = nearest.location;
  }

  return result;
}

// Zone-based (ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ğ¾ Ğ·Ğ¾Ğ½Ğ°Ğ¼, Ğ·Ğ°Ñ‚ĞµĞ¼ NN Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ·Ğ¾Ğ½Ñ‹)
function zoneBased(items: PickItem[]): PickItem[] {
  // Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€ÑƒĞµĞ¼ Ğ¿Ğ¾ Ğ·Ğ¾Ğ½Ğ°Ğ¼
  const byZone = items.reduce((acc, item) => {
    const zone = item.location.zone;
    if (!acc[zone]) acc[zone] = [];
    acc[zone].push(item);
    return acc;
  }, {} as Record<string, PickItem[]>);

  // Ğ¡Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼ Ğ·Ğ¾Ğ½Ñ‹ (A, B, C...)
  const sortedZones = Object.keys(byZone).sort();

  // ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ÑĞµĞ¼ NN Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ğ·Ğ¾Ğ½Ñ‹
  const result: PickItem[] = [];
  for (const zone of sortedZones) {
    const zoneItems = byZone[zone]!;
    const optimized = nearestNeighbor(zoneItems);
    result.push(...optimized);
  }

  return result;
}

// Manhattan Distance (Ğ´Ğ»Ñ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¹ Ğ±ĞµĞ· ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚)
function manhattanDistance(from: Location, to: Location): number {
  // Ğ Ğ°ÑÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ·Ğ¾Ğ½Ğ°Ğ¼Ğ¸ (Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ½Ğ¾ 10Ğ¼ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ·Ğ¾Ğ½Ğ°Ğ¼Ğ¸)
  const zoneDist = Math.abs(from.zone.charCodeAt(0) - to.zone.charCodeAt(0)) * 10;
  
  // Ğ Ğ°ÑÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¼ĞµĞ¶Ğ´Ñƒ Ñ€ÑĞ´Ğ°Ğ¼Ğ¸ (Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ½Ğ¾ 3Ğ¼ Ğ¼ĞµĞ¶Ğ´Ñƒ Ñ€ÑĞ´Ğ°Ğ¼Ğ¸)
  const aisleDist = Math.abs(from.aisle - to.aisle) * 3;
  
  // Ğ Ğ°ÑÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¿Ğ¾Ğ»ĞºĞ°Ğ¼Ğ¸ (Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ½Ğ¾ 0.5Ğ¼ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¿Ğ¾Ğ»ĞºĞ°Ğ¼Ğ¸)
  const shelfDist = Math.abs(from.shelf - to.shelf) * 0.5;

  return zoneDist + aisleDist + shelfDist;
}

// Euclidean Distance (Ğ´Ğ»Ñ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¹ Ñ ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ğ°Ğ¼Ğ¸)
function euclideanDistance(from: Location, to: Location): number {
  if (from.coordX === undefined || to.coordX === undefined) {
    return manhattanDistance(from, to);
  }
  
  const dx = to.coordX - from.coordX;
  const dy = to.coordY! - from.coordY!;
  return Math.sqrt(dx * dx + dy * dy);
}
```

---

### 4.3 Ğ‘Ğ»Ğ¾Ğº 3: Picking List Service (Day 6-8)

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | Ğ¤Ğ°Ğ¹Ğ» | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|----|--------|------|--------|
| 3.1 | Prisma: PickingList, PickingItem models | `prisma/schema.prisma` | â¬œ |
| 3.2 | PickingListService | `src/server/services/picking-list-service.ts` | â¬œ |
| 3.3 | Create picking list from orders | `src/server/services/picking-list-service.ts` | â¬œ |
| 3.4 | Batch picking (Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²) | `src/server/services/picking-list-service.ts` | â¬œ |
| 3.5 | Wave picking (Ğ¿Ğ¾ Ğ·Ğ¾Ğ½Ğ°Ğ¼) | `src/server/services/picking-list-service.ts` | â¬œ |
| 3.6 | Pick confirmation flow | `src/server/services/picking-list-service.ts` | â¬œ |
| 3.7 | tRPC: picking router | `src/server/api/routers/picking.ts` | â¬œ |
| 3.8 | Unit-Ñ‚ĞµÑÑ‚Ñ‹ PickingListService | `src/__tests__/unit/picking.test.ts` | â¬œ |

**PickingListService API:**

```typescript
// src/server/services/picking-list-service.ts

export interface CreatePickingListInput {
  warehouse: string;
  orders: Array<{
    orderNumber: string;
    customerName?: string;
    items: Array<{
      sku: string;
      quantity: number;
    }>;
  }>;
  pickingType?: "single" | "batch" | "wave";
  priority?: number;
  assignTo?: string;
}

export interface PickConfirmation {
  itemId: number;
  pickedQty: number;
  barcodeScan?: string;
  confirmedBy: string;
}

export interface PickIssue {
  itemId: number;
  issueType: "not_found" | "wrong_location" | "damaged" | "shortage";
  note?: string;
}

export class PickingListService {
  /**
   * Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ»Ğ¸ÑÑ‚ ÑĞ±Ğ¾Ñ€ĞºĞ¸ Ğ¸Ğ· Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²
   */
  async createPickingList(input: CreatePickingListInput): Promise<PickingList>;

  /**
   * ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ»Ğ¸ÑÑ‚ ÑĞ±Ğ¾Ñ€ĞºĞ¸ Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¼ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ¼
   */
  async getPickingList(listId: number): Promise<PickingList & { items: PickingItem[] }>;

  /**
   * ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ğ»Ğ¸ÑÑ‚Ñ‹ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ½Ğ¸ĞºĞ°
   */
  async getAssignedLists(workerId: string): Promise<PickingList[]>;

  /**
   * ĞĞ°Ğ·Ğ½Ğ°Ñ‡Ğ¸Ñ‚ÑŒ Ğ»Ğ¸ÑÑ‚ Ğ½Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ½Ğ¸ĞºĞ°
   */
  async assignToWorker(listId: number, workerId: string): Promise<PickingList>;

  /**
   * ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ ÑĞ±Ğ¾Ñ€ĞºÑƒ
   */
  async startPicking(listId: number, workerId: string): Promise<PickingList>;

  /**
   * ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ ÑĞ±Ğ¾Ñ€ĞºÑƒ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸
   */
  async confirmPick(confirmation: PickConfirmation): Promise<PickingItem>;

  /**
   * Ğ¡Ğ¾Ğ¾Ğ±Ñ‰Ğ¸Ñ‚ÑŒ Ğ¾ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğµ
   */
  async reportIssue(issue: PickIssue): Promise<PickingItem>;

  /**
   * Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ñ‚ÑŒ ÑĞ±Ğ¾Ñ€ĞºÑƒ
   */
  async completePicking(listId: number, workerId: string): Promise<PickingList>;

  /**
   * Batch Picking: Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² Ğ² Ğ¾Ğ´Ğ¸Ğ½ Ğ»Ğ¸ÑÑ‚
   * Ğ¢Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€ÑƒÑÑ‚ÑÑ Ğ¿Ğ¾ SKU Ğ´Ğ»Ñ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ´Ğ° Ğ¿Ğ¾ ÑĞºĞ»Ğ°Ğ´Ñƒ
   */
  async createBatchPicking(
    warehouse: string,
    orderNumbers: string[]
  ): Promise<PickingList>;

  /**
   * Wave Picking: Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ Ğ»Ğ¸ÑÑ‚ Ğ¿Ğ¾ Ğ·Ğ¾Ğ½Ğ°Ğ¼
   * ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ½Ğ¸Ğº ÑĞ¾Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ ÑĞ²Ğ¾Ñ Ğ·Ğ¾Ğ½Ñƒ
   */
  async createWavePicking(
    warehouse: string,
    orders: CreatePickingListInput["orders"],
    zones: string[]
  ): Promise<PickingList[]>;

  /**
   * Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ¼ĞµÑ€ Ğ»Ğ¸ÑÑ‚Ğ°
   */
  generateListNumber(): string;
}
```

**Ğ¢Ğ¸Ğ¿Ñ‹ ÑĞ±Ğ¾Ñ€ĞºĞ¸:**

| Ğ¢Ğ¸Ğ¿ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞšĞ¾Ğ³Ğ´Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ |
|-----|----------|-------------------|
| **Single** | ĞĞ´Ğ¸Ğ½ Ğ·Ğ°ĞºĞ°Ğ· = Ğ¾Ğ´Ğ¸Ğ½ Ğ»Ğ¸ÑÑ‚ | ĞšÑ€ÑƒĞ¿Ğ½Ñ‹Ğµ Ğ·Ğ°ĞºĞ°Ğ·Ñ‹, VIP ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹ |
| **Batch** | ĞĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ĞµĞ½Ñ‹ | ĞœĞ½Ğ¾Ğ³Ğ¾ Ğ¼ĞµĞ»ĞºĞ¸Ñ… Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ² |
| **Wave** | Ğ Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ Ğ·Ğ¾Ğ½Ğ°Ğ¼ | Ğ‘Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ ÑĞºĞ»Ğ°Ğ´, Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ½Ğ¸ĞºĞ¾Ğ² |

---

### 4.4 Ğ‘Ğ»Ğ¾Ğº 4: Picking UI (Day 9-12)

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | Ğ¤Ğ°Ğ¹Ğ» | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|----|--------|------|--------|
| 4.1 | Picking Page | `src/app/picking/page.tsx` | â¬œ |
| 4.2 | PickingListTable component | `src/app/_components/picking/PickingListTable.tsx` | â¬œ |
| 4.3 | PickingItemCard component | `src/app/_components/picking/PickingItemCard.tsx` | â¬œ |
| 4.4 | PickingConfirmModal component | `src/app/_components/picking/PickingConfirmModal.tsx` | â¬œ |
| 4.5 | RouteVisualization component | `src/app/_components/picking/RouteVisualization.tsx` | â¬œ |
| 4.6 | PickingProgress component | `src/app/_components/picking/PickingProgress.tsx` | â¬œ |
| 4.7 | CreatePickingListForm | `src/app/_components/picking/CreatePickingListForm.tsx` | â¬œ |
| 4.8 | Mobile-optimized picking view | `src/app/picking/[id]/page.tsx` | â¬œ |
| 4.9 | Index exports | `src/app/_components/picking/index.ts` | â¬œ |

**Picking Page Layout (Desktop - Manager View):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ±Ğ¾Ñ€ĞºĞ¾Ğ¹                  [Ğ¡ĞºĞ»Ğ°Ğ´: ĞœĞ¾ÑĞºĞ²Ğ° â–¼] [+ ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ»Ğ¸ÑÑ‚]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ                                                     â”‚
â”‚  â”œâ”€ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¾: 45        â”œâ”€ Ğ’ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ: 12       â”œâ”€ Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¾: 30             â”‚
â”‚  â””â”€ Picks/Ñ‡Ğ°Ñ: 42      â””â”€ Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ: 8 Ğ¼Ğ¸Ğ½ â””â”€ ĞÑˆĞ¸Ğ±ĞºĞ¸: 2 (0.5%)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“¦ ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ğ»Ğ¸ÑÑ‚Ñ‹ ÑĞ±Ğ¾Ñ€ĞºĞ¸                           [Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ â–¼] [ĞŸĞ¾Ğ¸ÑĞº ğŸ”] â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â„– Ğ›Ğ¸ÑÑ‚Ğ°       â”‚ Ğ¢Ğ¸Ğ¿    â”‚ ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹ â”‚ Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ½Ğ¸Ğº  â”‚ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ   â”‚ Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ PL-2026-01-001â”‚ Batch  â”‚   12    â”‚ Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ² Ğ. â”‚ ğŸŸ¡ Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° â”‚ [ğŸ‘] [âœ]â”‚  â”‚
â”‚  â”‚ PL-2026-01-002â”‚ Single â”‚    5    â”‚    â€”      â”‚ ğŸ”µ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½ â”‚ [ğŸ‘¤] [ğŸ—‘]â”‚  â”‚
â”‚  â”‚ PL-2026-01-003â”‚ Wave   â”‚   28    â”‚ ĞŸĞµÑ‚Ñ€Ğ¾Ğ² Ğ’. â”‚ ğŸŸ¡ Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° â”‚ [ğŸ‘] [âœ]â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸš¶ Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ½Ğ¸ĞºĞ¸ Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½                                                       â”‚
â”‚  â”œâ”€ [ğŸŸ¢] Ğ˜Ğ²Ğ°Ğ½Ğ¾Ğ² Ğ. â€” PL-001 (8/12 Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹)                                â”‚
â”‚  â”œâ”€ [ğŸŸ¢] ĞŸĞµÑ‚Ñ€Ğ¾Ğ² Ğ’. â€” PL-003 (15/28 Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹)                               â”‚
â”‚  â””â”€ [âšª] Ğ¡Ğ¸Ğ´Ğ¾Ñ€Ğ¾Ğ² Ğš. â€” Ğ¡Ğ²Ğ¾Ğ±Ğ¾Ğ´ĞµĞ½                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Mobile Picking View (Worker):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ Ğ›Ğ¸ÑÑ‚ PL-2026-01-001                â”‚
â”‚  Batch â€¢ 12 Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹ â€¢ ~15 Ğ¼Ğ¸Ğ½          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  4/12 (33%)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ°Ñ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ·ï¸ Ğ‘Ğ¾Ğ»Ñ‚ Ğœ8x30 (SKU-001)         â”‚  â”‚
â”‚  â”‚                                   â”‚  â”‚
â”‚  â”‚  ğŸ“¦ ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾: 25 ÑˆÑ‚            â”‚  â”‚
â”‚  â”‚  ğŸ“ Ğ›Ğ¾ĞºĞ°Ñ†Ğ¸Ñ: A-03-02             â”‚  â”‚
â”‚  â”‚                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚    [Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑˆÑ‚Ñ€Ğ¸Ñ…ĞºĞ¾Ğ´]   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚           Ğ¸Ğ»Ğ¸               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    [ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ]    â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                   â”‚  â”‚
â”‚  â”‚  [âš ï¸ ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°]                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‹ ĞÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ (ÑĞ²ĞµÑ€Ğ½ÑƒÑ‚Ğ¾)       â”‚
â”‚  â”œâ”€ B-01-05: Ğ“Ğ°Ğ¹ĞºĞ° Ğœ10 Ã— 50           â”‚
â”‚  â”œâ”€ B-02-03: Ğ¨Ğ°Ğ¹Ğ±Ğ° 12Ğ¼Ğ¼ Ã— 100         â”‚
â”‚  â””â”€ ... ĞµÑ‰Ñ‘ 5 Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         [ğŸ Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ñ‚ÑŒ ÑĞ±Ğ¾Ñ€ĞºÑƒ]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**PickingItemCard Component:**

```typescript
// src/app/_components/picking/PickingItemCard.tsx

interface PickingItemCardProps {
  item: {
    id: number;
    sku: string;
    productName: string;
    requiredQty: number;
    pickedQty: number;
    locationCode: string;
    zone: string;
    status: "pending" | "picked" | "skipped" | "shortage";
    sequenceNum: number;
  };
  isActive: boolean;
  onConfirm: (itemId: number, qty: number, barcode?: string) => void;
  onReportIssue: (itemId: number, issue: string, note?: string) => void;
}

export function PickingItemCard({
  item,
  isActive,
  onConfirm,
  onReportIssue,
}: PickingItemCardProps) {
  return (
    <div className={cn(
      "rounded-lg border p-4 transition-all",
      isActive && "ring-2 ring-blue-500 bg-blue-50",
      item.status === "picked" && "bg-green-50 border-green-200",
      item.status === "shortage" && "bg-red-50 border-red-200",
    )}>
      {/* ... */}
    </div>
  );
}
```

---

### 4.5 Ğ‘Ğ»Ğ¾Ğº 5: 1C Integration (Day 13-14)

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | Ğ¤Ğ°Ğ¹Ğ» | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|----|--------|------|--------|
| 5.1 | Import orders from 1C | `src/server/services/one-c-client.ts` | â¬œ |
| 5.2 | Create Shipment document in 1C | `src/server/services/one-c-client.ts` | â¬œ |
| 5.3 | Auto-sync picking completion | `src/server/services/picking-list-service.ts` | â¬œ |
| 5.4 | Webhook: order status updates | `src/app/api/webhooks/one-c/route.ts` | â¬œ |
| 5.5 | Integration tests | `src/__tests__/integration/picking.test.ts` | â¬œ |

**1C Integration Flow:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      1C â†” Picking Integration                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  1C Orders                    AI Stock Keeper                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚ Order 1 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚                       â”‚
â”‚  â”‚ Order 2 â”‚      Import      â”‚ Picking List â”‚                       â”‚
â”‚  â”‚ Order 3 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚              â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                     â”‚                               â”‚
â”‚                                     â”‚ Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ°              â”‚
â”‚                                     â–¼                               â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                              â”‚ Create       â”‚                       â”‚
â”‚                              â”‚ Shipment Doc â”‚                       â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                     â”‚                               â”‚
â”‚                                     â–¼                               â”‚
â”‚  1C Documents                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ POST to 1C   â”‚                       â”‚
â”‚  â”‚ Shipment  â”‚    Sync       â”‚ API          â”‚                       â”‚
â”‚  â”‚ Document  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**1C API Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ñ:**

```typescript
// src/server/services/one-c-client.ts (Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ)

export interface OrderItem {
  sku: string;
  productName: string;
  quantity: number;
  price?: number;
}

export interface Order1C {
  orderNumber: string;
  customerName: string;
  warehouse: string;
  items: OrderItem[];
  status: "new" | "confirmed" | "in_picking" | "shipped" | "cancelled";
  createdAt: Date;
}

export interface ShipmentInput {
  orderNumber: string;
  pickingListId: number;
  items: Array<{
    sku: string;
    quantity: number; // Ğ¤Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¾Ñ‚Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ¾
  }>;
  warehouse: string;
  shippedAt?: Date;
}

export class OneCClient {
  // ... existing methods ...

  /**
   * ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ·Ñ‹, Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğµ Ğº ÑĞ±Ğ¾Ñ€ĞºĞµ
   */
  async getOrdersForPicking(warehouse: string): Promise<Order1C[]>;

  /**
   * ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ·Ğ°ĞºĞ°Ğ·Ğ°
   */
  async getOrderDetails(orderNumber: string): Promise<Order1C>;

  /**
   * Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ¾Ñ‚Ğ³Ñ€ÑƒĞ·ĞºĞ¸
   */
  async createShipmentDocument(input: ShipmentInput): Promise<Document1C>;

  /**
   * ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ·Ğ°ĞºĞ°Ğ·Ğ° Ğ² 1C
   */
  async updateOrderStatus(
    orderNumber: string,
    status: "in_picking" | "shipped"
  ): Promise<void>;
}
```

---

### 4.6 Ğ‘Ğ»Ğ¾Ğº 6: Analytics & Performance (Day 15)

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | Ğ¤Ğ°Ğ¹Ğ» | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|----|--------|------|--------|
| 6.1 | PickingAnalyticsService | `src/server/services/picking-analytics.ts` | â¬œ |
| 6.2 | Worker performance metrics | `src/server/services/picking-analytics.ts` | â¬œ |
| 6.3 | Dashboard widget | `src/app/_components/dashboard/PickingWidget.tsx` | â¬œ |
| 6.4 | tRPC: analytics endpoints | `src/server/api/routers/picking.ts` | â¬œ |
| 6.5 | Export reports | `src/server/services/picking-analytics.ts` | â¬œ |

**PickingAnalyticsService API:**

```typescript
// src/server/services/picking-analytics.ts

export interface PickingStats {
  period: "today" | "week" | "month";
  totalLists: number;
  completedLists: number;
  totalItems: number;
  totalQuantity: number;
  avgPickingMins: number;
  picksPerHour: number;
  accuracy: number;          // % Ğ±ĞµĞ· Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
  shortageRate: number;      // % Ğ½ĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‡
}

export interface WorkerPerformance {
  workerId: string;
  workerName: string;
  completedLists: number;
  totalItems: number;
  avgPickingMins: number;
  picksPerHour: number;
  accuracy: number;
  efficiency: number;        // vs estimated time
  trend: "improving" | "stable" | "declining";
}

export class PickingAnalyticsService {
  /**
   * ĞĞ±Ñ‰Ğ°Ñ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° ÑĞ±Ğ¾Ñ€ĞºĞ¸
   */
  async getStats(warehouse: string, period: string): Promise<PickingStats>;

  /**
   * ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ½Ğ¸ĞºĞ¾Ğ²
   */
  async getWorkerPerformance(
    warehouse: string,
    period: string
  ): Promise<WorkerPerformance[]>;

  /**
   * Ğ¢Ğ¾Ğ¿ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº ÑĞ±Ğ¾Ñ€ĞºĞ¸
   */
  async getTopIssues(warehouse: string, limit?: number): Promise<Array<{
    issueType: string;
    count: number;
    skus: string[];
  }>>;

  /**
   * Ğ¢Ñ€ĞµĞ½Ğ´ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
   */
  async getPerformanceTrend(
    warehouse: string,
    days: number
  ): Promise<Array<{
    date: string;
    picksPerHour: number;
    accuracy: number;
  }>>;

  /**
   * Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ÑĞ±Ğ¾Ñ€ĞºĞ¸
   */
  async recordPickingHistory(
    pickingList: PickingList,
    workerId: string
  ): Promise<PickingHistory>;
}
```

**Dashboard Widget:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ                                          [ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ â†’] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚     30      â”‚  â”‚    8 Ğ¼Ğ¸Ğ½    â”‚  â”‚   42/Ñ‡Ğ°Ñ    â”‚  â”‚   99.5%     â”‚       â”‚
â”‚  â”‚  Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¾  â”‚  â”‚ Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ Ğ²Ñ€. â”‚  â”‚ Picks/Ñ‡Ğ°Ñ   â”‚  â”‚  Ğ¢Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ   â”‚       â”‚
â”‚  â”‚   â†‘12%      â”‚  â”‚   â†“15%      â”‚  â”‚   â†‘8%       â”‚  â”‚    =        â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                            â”‚
â”‚  ğŸ“ˆ ĞĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¿Ğ¾ Ñ‡Ğ°ÑĞ°Ğ¼                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    â–ˆâ–ˆ                                                               â”‚   â”‚
â”‚  â”‚    â–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ                                                         â”‚   â”‚
â”‚  â”‚    â–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                               â”‚   â”‚
â”‚  â”‚    â–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ                             â”‚   â”‚
â”‚  â”‚ â”€â”€â”€08â”€â”€09â”€â”€â”€â”€10â”€â”€â”€â”€â”€â”€â”€â”€11â”€â”€â”€â”€12â”€â”€â”€â”€13â”€â”€â”€â”€14â”€â”€â”€â”€15â”€â”€â”€â”€16â”€â”€â”€â”€17â”€â”€â”€    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4.7 Ğ‘Ğ»Ğ¾Ğº 7: Backend API

| ID | Endpoint | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|----|----------|----------|--------|
| 7.1 | `location.getAll` | Ğ’ÑĞµ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¸ ÑĞºĞ»Ğ°Ğ´Ğ° | â¬œ |
| 7.2 | `location.create` | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ñ | â¬œ |
| 7.3 | `location.assignSku` | ĞĞ°Ğ·Ğ½Ğ°Ñ‡Ğ¸Ñ‚ÑŒ Ñ‚Ğ¾Ğ²Ğ°Ñ€ Ğ½Ğ° Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ñ | â¬œ |
| 7.4 | `location.import` | Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ Ğ¸Ğ· CSV | â¬œ |
| 7.5 | `picking.create` | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ»Ğ¸ÑÑ‚ ÑĞ±Ğ¾Ñ€ĞºĞ¸ | â¬œ |
| 7.6 | `picking.getList` | ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ»Ğ¸ÑÑ‚ Ñ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ¼ | â¬œ |
| 7.7 | `picking.getAssigned` | Ğ›Ğ¸ÑÑ‚Ñ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ½Ğ¸ĞºĞ° | â¬œ |
| 7.8 | `picking.assign` | ĞĞ°Ğ·Ğ½Ğ°Ñ‡Ğ¸Ñ‚ÑŒ Ğ½Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ½Ğ¸ĞºĞ° | â¬œ |
| 7.9 | `picking.start` | ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ ÑĞ±Ğ¾Ñ€ĞºÑƒ | â¬œ |
| 7.10 | `picking.confirmItem` | ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ | â¬œ |
| 7.11 | `picking.reportIssue` | Ğ¡Ğ¾Ğ¾Ğ±Ñ‰Ğ¸Ñ‚ÑŒ Ğ¾ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğµ | â¬œ |
| 7.12 | `picking.complete` | Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ñ‚ÑŒ ÑĞ±Ğ¾Ñ€ĞºÑƒ | â¬œ |
| 7.13 | `picking.getStats` | Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° ÑĞ±Ğ¾Ñ€ĞºĞ¸ | â¬œ |
| 7.14 | `picking.getWorkerPerformance` | ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ½Ğ¸ĞºĞ¾Ğ² | â¬œ |

**tRPC Routers:**

```typescript
// src/server/api/routers/location.ts

export const locationRouter = createTRPCRouter({
  getAll: publicProcedure
    .input(z.object({ warehouse: z.string() }))
    .query(async ({ input }) => {
      return locationService.getLocations(input.warehouse);
    }),

  create: publicProcedure
    .input(z.object({
      warehouse: z.string(),
      locationCode: z.string(),
      zone: z.string(),
      aisle: z.number(),
      shelf: z.number(),
      coordX: z.number().optional(),
      coordY: z.number().optional(),
    }))
    .mutation(async ({ input }) => {
      return locationService.createLocation(input);
    }),

  assignSku: publicProcedure
    .input(z.object({
      sku: z.string(),
      locationId: z.number(),
      quantity: z.number(),
      isPrimary: z.boolean().optional(),
    }))
    .mutation(async ({ input }) => {
      return locationService.assignSkuToLocation(
        input.sku,
        input.locationId,
        input.quantity,
        input.isPrimary
      );
    }),
});

// src/server/api/routers/picking.ts

export const pickingRouter = createTRPCRouter({
  create: publicProcedure
    .input(z.object({
      warehouse: z.string(),
      orders: z.array(z.object({
        orderNumber: z.string(),
        customerName: z.string().optional(),
        items: z.array(z.object({
          sku: z.string(),
          quantity: z.number(),
        })),
      })),
      pickingType: z.enum(["single", "batch", "wave"]).optional(),
      priority: z.number().optional(),
    }))
    .mutation(async ({ input }) => {
      return pickingListService.createPickingList(input);
    }),

  getList: publicProcedure
    .input(z.object({ id: z.number() }))
    .query(async ({ input }) => {
      return pickingListService.getPickingList(input.id);
    }),

  confirmItem: publicProcedure
    .input(z.object({
      itemId: z.number(),
      pickedQty: z.number(),
      barcodeScan: z.string().optional(),
      confirmedBy: z.string(),
    }))
    .mutation(async ({ input }) => {
      return pickingListService.confirmPick(input);
    }),

  reportIssue: publicProcedure
    .input(z.object({
      itemId: z.number(),
      issueType: z.enum(["not_found", "wrong_location", "damaged", "shortage"]),
      note: z.string().optional(),
    }))
    .mutation(async ({ input }) => {
      return pickingListService.reportIssue(input);
    }),

  complete: publicProcedure
    .input(z.object({
      listId: z.number(),
      workerId: z.string(),
    }))
    .mutation(async ({ input }) => {
      return pickingListService.completePicking(input.listId, input.workerId);
    }),

  getStats: publicProcedure
    .input(z.object({
      warehouse: z.string(),
      period: z.enum(["today", "week", "month"]).default("today"),
    }))
    .query(async ({ input }) => {
      return pickingAnalyticsService.getStats(input.warehouse, input.period);
    }),
});
```

---

### 4.8 Ğ‘Ğ»Ğ¾Ğº 8: Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

| ID | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | Ğ¢Ğ¸Ğ¿ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|----|--------|-----|--------|
| 8.1 | Unit-Ñ‚ĞµÑÑ‚Ñ‹ RouteOptimization | Jest | â¬œ |
| 8.2 | Unit-Ñ‚ĞµÑÑ‚Ñ‹ PickingListService | Jest | â¬œ |
| 8.3 | Unit-Ñ‚ĞµÑÑ‚Ñ‹ LocationService | Jest | â¬œ |
| 8.4 | Integration: picking flow | Jest | â¬œ |
| 8.5 | Integration: 1C shipment | Jest | â¬œ |
| 8.6 | E2E: mobile picking | Playwright | â¬œ |
| 8.7 | Performance: route optimization | Jest | â¬œ |
| 8.8 | Benchmark: NN vs OR-Tools | Manual | â¬œ |

**Test Cases:**

```typescript
// src/__tests__/unit/route-optimization.test.ts

describe("RouteOptimizationService", () => {
  describe("nearestNeighbor", () => {
    it("should return items in optimal order", () => {
      const items: PickItem[] = [
        { sku: "1", productName: "A", quantity: 1, location: { code: "C-01-01", zone: "C", aisle: 1, shelf: 1 } },
        { sku: "2", productName: "B", quantity: 1, location: { code: "A-01-01", zone: "A", aisle: 1, shelf: 1 } },
        { sku: "3", productName: "C", quantity: 1, location: { code: "B-01-01", zone: "B", aisle: 1, shelf: 1 } },
      ];

      const start = { code: "A-00-00", zone: "A", aisle: 0, shelf: 0 };
      const result = routeService.nearestNeighbor(items, start);

      // Ğ”Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ Ñ Ğ·Ğ¾Ğ½Ñ‹ A (Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞ°Ñ Ğº ÑÑ‚Ğ°Ñ€Ñ‚Ñƒ)
      expect(result[0]?.location.zone).toBe("A");
    });

    it("should handle empty array", () => {
      const result = routeService.nearestNeighbor([]);
      expect(result).toEqual([]);
    });

    it("should handle single item", () => {
      const items: PickItem[] = [
        { sku: "1", productName: "A", quantity: 1, location: { code: "A-01-01", zone: "A", aisle: 1, shelf: 1 } },
      ];
      const result = routeService.nearestNeighbor(items);
      expect(result).toHaveLength(1);
    });
  });

  describe("zoneBased", () => {
    it("should group items by zone first", () => {
      const items: PickItem[] = [
        { sku: "1", productName: "A", quantity: 1, location: { code: "C-01-01", zone: "C", aisle: 1, shelf: 1 } },
        { sku: "2", productName: "B", quantity: 1, location: { code: "A-01-01", zone: "A", aisle: 1, shelf: 1 } },
        { sku: "3", productName: "C", quantity: 1, location: { code: "A-02-01", zone: "A", aisle: 2, shelf: 1 } },
        { sku: "4", productName: "D", quantity: 1, location: { code: "B-01-01", zone: "B", aisle: 1, shelf: 1 } },
      ];

      const result = routeService.zoneBased(items);

      // Ğ’ÑĞµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ·Ğ¾Ğ½Ñ‹ A Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ¸Ğ´Ñ‚Ğ¸ Ğ¿Ğ¾Ğ´Ñ€ÑĞ´
      const aIndices = result
        .map((item, idx) => item.location.zone === "A" ? idx : -1)
        .filter(idx => idx !== -1);

      expect(aIndices).toEqual([0, 1]); // Ğ—Ğ¾Ğ½Ğ° A Ğ¿ĞµÑ€Ğ²Ğ°Ñ
    });
  });

  describe("calculateDistance", () => {
    it("should use Manhattan distance for locations without coords", () => {
      const from = { code: "A-01-01", zone: "A", aisle: 1, shelf: 1 };
      const to = { code: "B-03-05", zone: "B", aisle: 3, shelf: 5 };

      const distance = routeService.calculateDistance(from, to);

      // Zone diff: 1 Ã— 10m = 10m
      // Aisle diff: 2 Ã— 3m = 6m
      // Shelf diff: 4 Ã— 0.5m = 2m
      // Total: 18m
      expect(distance).toBe(18);
    });

    it("should use Euclidean distance when coords available", () => {
      const from = { code: "A-01-01", zone: "A", aisle: 1, shelf: 1, coordX: 0, coordY: 0 };
      const to = { code: "A-01-02", zone: "A", aisle: 1, shelf: 2, coordX: 3, coordY: 4 };

      const distance = routeService.calculateDistance(from, to);

      // âˆš(3Â² + 4Â²) = 5
      expect(distance).toBe(5);
    });
  });

  describe("estimatePickingTime", () => {
    it("should calculate based on distance and item count", () => {
      const route: OptimizedRoute = {
        items: Array(10).fill({ sku: "1", productName: "A", quantity: 1, location: {} }),
        totalDistance: 100, // 100 Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²
        estimatedMins: 0,
        algorithm: "nearest_neighbor",
      };

      const time = routeService.estimatePickingTime(route, {
        walkingSpeedMps: 1.0,  // 1 Ğ¼/ÑĞµĞº
        pickTimeSeconds: 15,   // 15 ÑĞµĞº Ğ½Ğ° pick
      });

      // Walking: 100m / 1m/s = 100s
      // Picking: 10 items Ã— 15s = 150s
      // Total: 250s = 4.17 mins
      expect(time).toBeCloseTo(4.17, 1);
    });
  });
});
```

```typescript
// src/__tests__/unit/picking.test.ts

describe("PickingListService", () => {
  describe("createPickingList", () => {
    it("should create list with optimized route", async () => {
      const input: CreatePickingListInput = {
        warehouse: "MSK-01",
        orders: [{
          orderNumber: "ORD-001",
          items: [
            { sku: "SKU-001", quantity: 10 },
            { sku: "SKU-002", quantity: 5 },
          ],
        }],
      };

      const list = await pickingService.createPickingList(input);

      expect(list.status).toBe("created");
      expect(list.items).toHaveLength(2);
      expect(list.optimizedRoute).toBeDefined();
      expect(list.totalDistance).toBeGreaterThan(0);
    });

    it("should assign sequence numbers based on route", async () => {
      // ... test that items have correct sequenceNum
    });
  });

  describe("confirmPick", () => {
    it("should update item status to picked", async () => {
      const item = await pickingService.confirmPick({
        itemId: 1,
        pickedQty: 10,
        confirmedBy: "worker-1",
      });

      expect(item.status).toBe("picked");
      expect(item.pickedQty).toBe(10);
    });

    it("should mark as shortage if qty < required", async () => {
      const item = await pickingService.confirmPick({
        itemId: 1,
        pickedQty: 5, // required is 10
        confirmedBy: "worker-1",
      });

      expect(item.status).toBe("shortage");
    });
  });

  describe("completePicking", () => {
    it("should create 1C shipment document", async () => {
      const list = await pickingService.completePicking(1, "worker-1");

      expect(list.status).toBe("completed");
      expect(list.completedAt).toBeDefined();
      // Should trigger 1C integration
    });

    it("should record picking history", async () => {
      await pickingService.completePicking(1, "worker-1");

      const history = await db.pickingHistory.findFirst({
        where: { pickingListId: 1 },
      });

      expect(history).toBeDefined();
      expect(history?.workerId).toBe("worker-1");
    });
  });
});
```

---

## 5. Environment Variables

```env
# Route Optimization
ROUTE_OPTIMIZATION_ALGORITHM=nearest_neighbor  # "nearest_neighbor" | "or_tools" | "zone_based"

# Warehouse defaults
WAREHOUSE_WALKING_SPEED_MPS=1.4    # Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ Ñ…Ğ¾Ğ´ÑŒĞ±Ñ‹ Ğ¼/ÑĞµĞº
WAREHOUSE_PICK_TIME_SECONDS=15    # Ğ’Ñ€ĞµĞ¼Ñ Ğ½Ğ° Ğ¾Ğ´Ğ¸Ğ½ pick

# OR-Tools (v2)
OR_TOOLS_TIMEOUT_MS=5000          # Ğ¢Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚ Ğ´Ğ»Ñ OR-Tools

# 1C Integration
ONE_C_AUTO_CREATE_SHIPMENT=true   # ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ñ‚Ğ³Ñ€ÑƒĞ·ĞºÑƒ
```

---

## 6. Ğ¢Ğ°Ğ¹Ğ¼Ğ»Ğ°Ğ¹Ğ½

```
Week 1 (Days 1-5) - Foundation
â”œâ”€â”€ Day 1: Prisma models (Location, InventoryLocation)
â”œâ”€â”€ Day 2: LocationService, CSV import
â”œâ”€â”€ Day 3: RouteOptimizationService (Nearest-Neighbor)
â”œâ”€â”€ Day 4: RouteOptimizationService (Zone-based, distance matrix)
â””â”€â”€ Day 5: Unit tests, tRPC endpoints

Week 2 (Days 6-10) - Picking Core
â”œâ”€â”€ Day 6: Prisma models (PickingList, PickingItem)
â”œâ”€â”€ Day 7: PickingListService (create, optimize)
â”œâ”€â”€ Day 8: PickingListService (confirm, complete)
â”œâ”€â”€ Day 9: Picking Page UI (Desktop)
â”œâ”€â”€ Day 10: Picking Item Card, Progress components

Week 3 (Days 11-15) - Integration & Polish
â”œâ”€â”€ Day 11: Mobile picking view
â”œâ”€â”€ Day 12: 1C integration (orders import, shipment)
â”œâ”€â”€ Day 13: Analytics service, dashboard widget
â”œâ”€â”€ Day 14: OR-Tools integration (optional v2)
â””â”€â”€ Day 15: Testing, documentation, performance benchmark
```

---

## 7. Ğ¤Ğ°Ğ¹Ğ»Ğ¾Ğ²Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ picking/
â”‚   â”‚   â”œâ”€â”€ page.tsx                    # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ±Ğ¾Ñ€ĞºĞ¾Ğ¹ (desktop)
â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚       â””â”€â”€ page.tsx                # ĞœĞ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ°Ñ ÑĞ±Ğ¾Ñ€ĞºĞ°
â”‚   â””â”€â”€ _components/
â”‚       â”œâ”€â”€ picking/
â”‚       â”‚   â”œâ”€â”€ index.ts
â”‚       â”‚   â”œâ”€â”€ PickingListTable.tsx    # Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ»Ğ¸ÑÑ‚Ğ¾Ğ²
â”‚       â”‚   â”œâ”€â”€ PickingItemCard.tsx     # ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸
â”‚       â”‚   â”œâ”€â”€ PickingConfirmModal.tsx # ĞœĞ¾Ğ´Ğ°Ğ»ĞºĞ° Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ
â”‚       â”‚   â”œâ”€â”€ PickingProgress.tsx     # ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ ÑĞ±Ğ¾Ñ€ĞºĞ¸
â”‚       â”‚   â”œâ”€â”€ RouteVisualization.tsx  # Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ°
â”‚       â”‚   â””â”€â”€ CreatePickingListForm.tsx
â”‚       â””â”€â”€ dashboard/
â”‚           â””â”€â”€ PickingWidget.tsx       # Ğ’Ğ¸Ğ´Ğ¶ĞµÑ‚ Ğ½Ğ° Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´Ğµ
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ location-service.ts         # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸ÑĞ¼Ğ¸
â”‚   â”‚   â”œâ”€â”€ route-optimization.ts       # ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ²
â”‚   â”‚   â”œâ”€â”€ picking-list-service.ts     # Ğ›Ğ¸ÑÑ‚Ñ‹ ÑĞ±Ğ¾Ñ€ĞºĞ¸
â”‚   â”‚   â””â”€â”€ picking-analytics.ts        # ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ routers/
â”‚           â”œâ”€â”€ location.ts             # tRPC router
â”‚           â””â”€â”€ picking.ts              # tRPC router
â”œâ”€â”€ __tests__/
â”‚   â”œâ”€â”€ unit/
â”‚   â”‚   â”œâ”€â”€ location.test.ts
â”‚   â”‚   â”œâ”€â”€ route-optimization.test.ts
â”‚   â”‚   â””â”€â”€ picking.test.ts
â”‚   â””â”€â”€ integration/
â”‚       â””â”€â”€ picking.test.ts
â””â”€â”€ scripts/
    â””â”€â”€ import-locations.ts             # Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¹
```

---

## 8. ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ ÑƒÑĞ¿ĞµÑ…Ğ°

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | Ğ¦ĞµĞ»ÑŒ | Ğ˜Ğ·Ğ¼ĞµÑ€ĞµĞ½Ğ¸Ğµ |
|---------|------|-----------|
| **Pick Time Reduction** | -40% | Avg time before vs after |
| **Pick Accuracy** | >99% | (correct picks / total picks) |
| **Route Efficiency** | >85% | (optimal distance / actual distance) |
| **Worker Productivity** | +50% picks/hour | Before vs after |
| **1C Sync Success** | >99% | Shipment docs created |
| **Mobile UX** | <3 taps per pick | User testing |
| **Page Load** | <2 sec | First Contentful Paint |

---

## 9. Ğ Ğ¸ÑĞºĞ¸ Ğ¸ Ğ¼Ğ¸Ñ‚Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸

| Ğ Ğ¸ÑĞº | Ğ’ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ | Ğ’Ğ»Ğ¸ÑĞ½Ğ¸Ğµ | ĞœĞ¸Ñ‚Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ |
|------|-------------|---------|-----------|
| ĞĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¾ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸ÑÑ… | Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ | Ğ’Ñ‹ÑĞ¾ĞºĞ¾Ğµ | CSV import tool, Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ²Ğ²Ğ¾Ğ´ UI |
| OR-Tools ÑĞ»Ğ¾Ğ¶ĞµĞ½ Ğ² Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ | ĞĞ¸Ğ·ĞºĞ¾Ğµ | Nearest-Neighbor Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡ĞµĞ½ Ğ´Ğ»Ñ MVP |
| Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ½Ğ¸ĞºĞ¸ Ğ½Ğµ Ñ…Ğ¾Ñ‚ÑÑ‚ ÑĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ | Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ | ĞĞ¿Ñ†Ğ¸Ñ Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ |
| Ğ¡ĞºĞ»Ğ°Ğ´ Ğ±ĞµĞ· Ğ·Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ | Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ | Fallback Ğ½Ğ° Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº |
| 1C API rate limits | ĞĞ¸Ğ·ĞºĞ°Ñ | Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ | Batch ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² |
| Offline Ğ½Ğ° ÑĞºĞ»Ğ°Ğ´Ğµ | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ | Ğ’Ñ‹ÑĞ¾ĞºĞ¾Ğµ | PWA Ñ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼ ĞºĞµÑˆĞµĞ¼ |

---

## 10. Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¾Ñ‚ Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ñ… Ñ„Ğ°Ğ·

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Phase 5 |
|-----------|-------------------------|
| `Inventory` model | Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğµ Ğ¾ÑÑ‚Ğ°Ñ‚ĞºĞ¸ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ |
| `Transaction` model | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ picking Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¹ |
| `OneCClient` | Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ², ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¾Ñ‚Ğ³Ñ€ÑƒĞ·Ğ¾Ğº |
| `BarcodeService` | Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğ¸ |
| `AlertService` | ĞĞ»ĞµÑ€Ñ‚Ñ‹ Ğ¾ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°Ñ… ÑĞ±Ğ¾Ñ€ĞºĞ¸ |
| `Dashboard` | PickingWidget Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ |

---

## 11. Optional: AI Verification (Future)

### 11.1 ĞšĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ñ

ĞŸĞ¾ÑĞ»Ğµ ÑĞ±Ğ¾Ñ€ĞºĞ¸ Ğ·Ğ°ĞºĞ°Ğ·Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ½Ğ¸Ğº Ñ„Ğ¾Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ€ÑƒĞµÑ‚ ÑĞ¾Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹. AI Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚:
- Ğ’ÑĞµ Ğ»Ğ¸ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ½Ğ° Ñ„Ğ¾Ñ‚Ğ¾
- ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ Ğ»Ğ¸ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾
- ĞĞµÑ‚ Ğ»Ğ¸ Ğ¿Ğ¾Ğ²Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğ¹

### 11.2 Tech Stack (ĞµÑĞ»Ğ¸ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ñ‹Ğ²Ğ°Ñ‚ÑŒ)

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹ |
|-----------|----------|
| **Object Detection** | YOLO v8, TensorFlow.js |
| **Cloud Vision** | Google Cloud Vision, AWS Rekognition |
| **Training** | Custom model Ğ½Ğ° Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°Ñ… ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° |

### 11.3 Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¸ Worker takes photo â†’ AI analyzes â†’ âœ… Confirm / âš ï¸ Alert â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚:** Low (Phase 7+)

---

## 12. Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğµ ÑˆĞ°Ğ³Ğ¸

ĞŸĞ¾ÑĞ»Ğµ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ñ Phase 5:
- [ ] **Phase 6:** Multi-Warehouse Sync
- [ ] **Phase 7:** Mobile App (PWA / React Native)
- [ ] **Future:** AI Verification
- [ ] **Future:** Voice-guided picking

---

**Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ½:** 2026-01-31  
**ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ:** 2026-01-31  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** ğŸ“‹ ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ  
**ĞĞ²Ñ‚Ğ¾Ñ€:** AI Stock Keeper Team
